{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "files": [
    {
      "content": "\"use client\";\n\nimport {\n  createOnDropHandler,\n  dragAndDropFeature,\n  hotkeysCoreFeature,\n  keyboardDragAndDropFeature,\n  selectionFeature,\n  syncDataLoaderFeature,\n} from \"@headless-tree/core\";\nimport { AssistiveTreeDescription, useTree } from \"@headless-tree/react\";\nimport {\n  RiBracesLine,\n  RiCodeSSlashLine,\n  RiFileLine,\n  RiFileTextLine,\n  RiImageLine,\n  RiReactjsLine,\n} from \"@remixicon/react\";\nimport { useState } from \"react\";\n\nimport { Tree, TreeItem, TreeItemLabel } from \"@/registry/default/ui/tree\";\n\ninterface Item {\n  name: string;\n  children?: string[];\n  fileExtension?: string;\n}\n\nconst initialItems: Record<string, Item> = {\n  app: {\n    children: [\"app/layout.tsx\", \"app/page.tsx\", \"app/(dashboard)\", \"app/api\"],\n    name: \"app\",\n  },\n  \"app/(dashboard)\": {\n    children: [\"app/(dashboard)/dashboard\"],\n    name: \"(dashboard)\",\n  },\n  \"app/(dashboard)/dashboard\": {\n    children: [\"app/(dashboard)/dashboard/page.tsx\"],\n    name: \"dashboard\",\n  },\n  \"app/(dashboard)/dashboard/page.tsx\": {\n    fileExtension: \"tsx\",\n    name: \"page.tsx\",\n  },\n  \"app/api\": { children: [\"app/api/hello\"], name: \"api\" },\n  \"app/api/hello\": { children: [\"app/api/hello/route.ts\"], name: \"hello\" },\n  \"app/api/hello/route.ts\": { fileExtension: \"ts\", name: \"route.ts\" },\n  \"app/layout.tsx\": { fileExtension: \"tsx\", name: \"layout.tsx\" },\n  \"app/page.tsx\": { fileExtension: \"tsx\", name: \"page.tsx\" },\n  components: {\n    children: [\"components/button.tsx\", \"components/card.tsx\"],\n    name: \"components\",\n  },\n  \"components/button.tsx\": { fileExtension: \"tsx\", name: \"button.tsx\" },\n  \"components/card.tsx\": { fileExtension: \"tsx\", name: \"card.tsx\" },\n  lib: { children: [\"lib/utils.ts\"], name: \"lib\" },\n  \"lib/utils.ts\": { fileExtension: \"ts\", name: \"utils.ts\" },\n  \"next.config.mjs\": { fileExtension: \"mjs\", name: \"next.config.mjs\" },\n  \"package.json\": { fileExtension: \"json\", name: \"package.json\" },\n  public: {\n    children: [\"public/favicon.ico\", \"public/vercel.svg\"],\n    name: \"public\",\n  },\n  \"public/favicon.ico\": { fileExtension: \"ico\", name: \"favicon.ico\" },\n  \"public/vercel.svg\": { fileExtension: \"svg\", name: \"vercel.svg\" },\n  \"README.md\": { fileExtension: \"md\", name: \"README.md\" },\n  root: {\n    children: [\n      \"app\",\n      \"components\",\n      \"lib\",\n      \"public\",\n      \"package.json\",\n      \"tailwind.config.ts\",\n      \"tsconfig.json\",\n      \"next.config.mjs\",\n      \"README.md\",\n    ],\n    name: \"Project Root\",\n  },\n  \"tailwind.config.ts\": { fileExtension: \"ts\", name: \"tailwind.config.ts\" },\n  \"tsconfig.json\": { fileExtension: \"json\", name: \"tsconfig.json\" },\n};\n\n// Helper function to get icon based on file extension\nfunction getFileIcon(extension: string | undefined, className: string) {\n  switch (extension) {\n    case \"tsx\":\n    case \"jsx\":\n      return <RiReactjsLine className={className} />;\n    case \"ts\":\n    case \"js\":\n    case \"mjs\":\n      return <RiCodeSSlashLine className={className} />;\n    case \"json\":\n      return <RiBracesLine className={className} />;\n    case \"svg\":\n    case \"ico\":\n    case \"png\":\n    case \"jpg\":\n      return <RiImageLine className={className} />;\n    case \"md\":\n      return <RiFileTextLine className={className} />;\n    default:\n      return <RiFileLine className={className} />;\n  }\n}\n\nconst indent = 20;\n\nexport default function Component() {\n  const [items, setItems] = useState(initialItems);\n\n  const tree = useTree<Item>({\n    canReorder: false,\n    dataLoader: {\n      getChildren: (itemId) => items[itemId]?.children ?? [],\n      getItem: (itemId) => items[itemId],\n    },\n    features: [\n      syncDataLoaderFeature,\n      selectionFeature,\n      hotkeysCoreFeature,\n      dragAndDropFeature,\n      keyboardDragAndDropFeature,\n    ],\n    getItemName: (item) => item.getItemData()?.name ?? \"Unknown\",\n    indent,\n    initialState: {\n      expandedItems: [\"app\", \"app/(dashboard)\", \"app/(dashboard)/dashboard\"],\n      selectedItems: [\"components\"],\n    },\n    isItemFolder: (item) => (item.getItemData()?.children?.length ?? 0) > 0,\n    onDrop: createOnDropHandler((parentItem, newChildrenIds) => {\n      setItems((prevItems) => {\n        // Sort the children alphabetically\n        const sortedChildren = [...newChildrenIds].sort((a, b) => {\n          const itemA = prevItems[a];\n          const itemB = prevItems[b];\n\n          // First sort folders before files\n          const isAFolder = (itemA?.children?.length ?? 0) > 0;\n          const isBFolder = (itemB?.children?.length ?? 0) > 0;\n\n          if (isAFolder && !isBFolder) return -1;\n          if (!isAFolder && isBFolder) return 1;\n\n          // Then sort alphabetically by name\n          return (itemA?.name ?? \"\").localeCompare(itemB?.name ?? \"\");\n        });\n\n        return {\n          ...prevItems,\n          [parentItem.getId()]: {\n            ...prevItems[parentItem.getId()],\n            children: sortedChildren,\n          },\n        };\n      });\n    }),\n    rootItemId: \"root\",\n  });\n\n  return (\n    <div className=\"flex h-full flex-col gap-2 *:first:grow\">\n      <div>\n        <Tree\n          className=\"before:-ms-1 relative before:absolute before:inset-0 before:bg-[repeating-linear-gradient(to_right,transparent_0,transparent_calc(var(--tree-indent)-1px),var(--border)_calc(var(--tree-indent)-1px),var(--border)_calc(var(--tree-indent)))]\"\n          indent={indent}\n          tree={tree}\n        >\n          <AssistiveTreeDescription tree={tree} />\n          {tree.getItems().map((item) => {\n            return (\n              <TreeItem className=\"pb-0!\" item={item} key={item.getId()}>\n                <TreeItemLabel className=\"rounded-none py-1\">\n                  <span className=\"flex items-center gap-2\">\n                    {!item.isFolder() &&\n                      getFileIcon(\n                        item.getItemData()?.fileExtension,\n                        \"text-muted-foreground pointer-events-none size-4\",\n                      )}\n                    {item.getItemName()}\n                  </span>\n                </TreeItemLabel>\n              </TreeItem>\n            );\n          })}\n        </Tree>\n      </div>\n\n      <p\n        aria-live=\"polite\"\n        className=\"mt-2 text-muted-foreground text-xs\"\n        role=\"region\"\n      >\n        File editor with drag and drop âˆ™{\" \"}\n        <a\n          className=\"underline hover:text-foreground\"\n          href=\"https://headless-tree.lukasbach.com\"\n          rel=\"noopener noreferrer\"\n          target=\"_blank\"\n        >\n          API\n        </a>\n      </p>\n    </div>\n  );\n}\n",
      "path": "registry/default/components/comp-575.tsx",
      "type": "registry:component"
    }
  ],
  "meta": {
    "tags": ["tree"]
  },
  "name": "comp-575",
  "registryDependencies": ["https://coss.com/origin/r/tree.json"],
  "type": "registry:component"
}
