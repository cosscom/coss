{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "files": [
    {
      "content": "\"use client\";\n\nimport { RotateCcwIcon } from \"lucide-react\";\nimport React, { useRef } from \"react\";\n\nimport { useSliderWithInput } from \"@/registry/default/hooks/use-slider-with-input\";\nimport { Button } from \"@/registry/default/ui/button\";\nimport { Input } from \"@/registry/default/ui/input\";\nimport { Label } from \"@/registry/default/ui/label\";\nimport { Slider } from \"@/registry/default/ui/slider\";\n\nexport default function Component() {\n  // Create refs to store reset functions\n  const resetFunctionsRef = useRef<(() => void)[]>([]);\n\n  // Function to reset all sliders to default\n  const resetAll = () => {\n    for (const resetFn of resetFunctionsRef.current) {\n      resetFn();\n    }\n  };\n\n  // Function to register reset functions\n  const registerResetFunction = (resetFn: () => void, index: number) => {\n    resetFunctionsRef.current[index] = resetFn;\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <legend className=\"font-medium text-foreground text-sm\">\n        Object position\n      </legend>\n      <div className=\"space-y-2\">\n        <SliderWithInput\n          defaultValue={[0]}\n          initialValue={[-2]}\n          label=\"X\"\n          maxValue={10}\n          minValue={-10}\n          onRegisterReset={(resetFn) => registerResetFunction(resetFn, 0)}\n        />\n        <SliderWithInput\n          defaultValue={[0]}\n          initialValue={[4]}\n          label=\"Y\"\n          maxValue={10}\n          minValue={-10}\n          onRegisterReset={(resetFn) => registerResetFunction(resetFn, 1)}\n        />\n        <SliderWithInput\n          defaultValue={[0]}\n          initialValue={[2]}\n          label=\"Z\"\n          maxValue={10}\n          minValue={-10}\n          onRegisterReset={(resetFn) => registerResetFunction(resetFn, 2)}\n        />\n      </div>\n      <Button className=\"w-full\" onClick={resetAll} variant=\"outline\">\n        <RotateCcwIcon\n          aria-hidden=\"true\"\n          className=\"-ms-1 opacity-60\"\n          size={16}\n        />\n        Reset\n      </Button>\n    </div>\n  );\n}\n\nfunction SliderWithInput({\n  minValue,\n  maxValue,\n  initialValue,\n  defaultValue,\n  label,\n  onRegisterReset,\n}: {\n  minValue: number;\n  maxValue: number;\n  initialValue: number[];\n  defaultValue: number[];\n  label: string;\n  onRegisterReset: (resetFn: () => void) => void;\n}) {\n  const {\n    sliderValue,\n    inputValues,\n    validateAndUpdateValue,\n    handleInputChange,\n    handleSliderChange,\n    resetToDefault,\n  } = useSliderWithInput({ defaultValue, initialValue, maxValue, minValue });\n\n  // Register the reset function when the component mounts\n  React.useEffect(() => {\n    onRegisterReset(resetToDefault);\n  }, [onRegisterReset, resetToDefault]);\n\n  return (\n    <div className=\"flex items-center gap-2\">\n      <Label className=\"text-muted-foreground text-xs\">{label}</Label>\n      <Slider\n        aria-label={label}\n        className=\"grow [&>:last-child>span]:rounded\"\n        max={maxValue}\n        min={minValue}\n        onValueChange={handleSliderChange}\n        value={sliderValue}\n      />\n      <Input\n        aria-label=\"Enter value\"\n        className=\"h-8 w-12 px-2 py-1\"\n        inputMode=\"decimal\"\n        onBlur={() => validateAndUpdateValue(inputValues[0], 0)}\n        onChange={(e) => handleInputChange(e, 0)}\n        onKeyDown={(e) => {\n          if (e.key === \"Enter\") {\n            validateAndUpdateValue(inputValues[0], 0);\n          }\n        }}\n        type=\"text\"\n        value={inputValues[0]}\n      />\n    </div>\n  );\n}\n",
      "path": "registry/default/components/comp-264.tsx",
      "type": "registry:component"
    },
    {
      "content": "\"use client\";\n\nimport { useCallback, useState } from \"react\";\n\ntype UseSliderWithInputProps = {\n  minValue?: number;\n  maxValue?: number;\n  initialValue?: number[];\n  defaultValue?: number[];\n};\n\nexport function useSliderWithInput({\n  minValue = 0,\n  maxValue = 100,\n  initialValue = [minValue],\n  defaultValue = [minValue],\n}: UseSliderWithInputProps) {\n  const [sliderValue, setSliderValue] = useState(initialValue);\n  const [inputValues, setInputValues] = useState(\n    initialValue.map((v) => v.toString()),\n  );\n\n  const showReset =\n    sliderValue.length === defaultValue.length &&\n    !sliderValue.every((value, index) => value === defaultValue[index]);\n\n  const validateAndUpdateValue = useCallback(\n    (rawValue: string, index: number) => {\n      if (rawValue === \"\" || rawValue === \"-\") {\n        const newInputValues = [...inputValues];\n        newInputValues[index] = \"0\";\n        setInputValues(newInputValues);\n\n        const newSliderValues = [...sliderValue];\n        newSliderValues[index] = 0;\n        setSliderValue(newSliderValues);\n        return;\n      }\n\n      const numValue = Number.parseFloat(rawValue);\n\n      if (Number.isNaN(numValue)) {\n        const newInputValues = [...inputValues];\n        newInputValues[index] = sliderValue[index]?.toString();\n        setInputValues(newInputValues);\n        return;\n      }\n\n      let clampedValue = Math.min(maxValue, Math.max(minValue, numValue));\n\n      if (sliderValue.length > 1) {\n        if (index === 0) {\n          clampedValue = Math.min(clampedValue, sliderValue[1]);\n        } else {\n          clampedValue = Math.max(clampedValue, sliderValue[0]);\n        }\n      }\n\n      const newSliderValues = [...sliderValue];\n      newSliderValues[index] = clampedValue;\n      setSliderValue(newSliderValues);\n\n      const newInputValues = [...inputValues];\n      newInputValues[index] = clampedValue.toString();\n      setInputValues(newInputValues);\n    },\n    [sliderValue, inputValues, minValue, maxValue],\n  );\n\n  const handleInputChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>, index: number) => {\n      const newValue = e.target.value;\n      if (newValue === \"\" || /^-?\\d*\\.?\\d*$/.test(newValue)) {\n        const newInputValues = [...inputValues];\n        newInputValues[index] = newValue;\n        setInputValues(newInputValues);\n      }\n    },\n    [inputValues],\n  );\n\n  const handleSliderChange = useCallback((newValue: number[]) => {\n    setSliderValue(newValue);\n    setInputValues(newValue.map((v) => v.toString()));\n  }, []);\n\n  const resetToDefault = useCallback(() => {\n    setSliderValue(defaultValue);\n    setInputValues(defaultValue.map((v) => v.toString()));\n  }, [defaultValue]);\n\n  return {\n    handleInputChange,\n    handleSliderChange,\n    inputValues,\n    resetToDefault,\n    showReset,\n    sliderValue,\n    validateAndUpdateValue,\n  };\n}\n",
      "path": "registry/default/hooks/use-slider-with-input.ts",
      "type": "registry:hook"
    }
  ],
  "meta": {
    "tags": ["slider", "label", "input", "button", "reset", "radix"]
  },
  "name": "comp-264",
  "registryDependencies": [
    "https://coss.com/origin/r/label.json",
    "https://coss.com/origin/r/slider.json",
    "https://coss.com/origin/r/input.json",
    "https://coss.com/origin/r/button.json"
  ],
  "type": "registry:component"
}
