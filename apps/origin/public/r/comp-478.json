{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "comp-478",
  "type": "registry:component",
  "dependencies": [
    "@tanstack/react-table"
  ],
  "registryDependencies": [
    "https://coss.com/origin/r/checkbox.json",
    "https://coss.com/origin/r/input.json",
    "https://coss.com/origin/r/label.json",
    "https://coss.com/origin/r/select.json",
    "https://coss.com/origin/r/table.json"
  ],
  "files": [
    {
      "path": "registry/default/components/comp-478.tsx",
      "content": "\"use client\";\n\nimport {\n  type Column,\n  type ColumnDef,\n  type ColumnFiltersState,\n  flexRender,\n  getCoreRowModel,\n  getFacetedMinMaxValues,\n  getFacetedRowModel,\n  getFacetedUniqueValues,\n  getFilteredRowModel,\n  getSortedRowModel,\n  type RowData,\n  type SortingState,\n  useReactTable,\n} from \"@tanstack/react-table\";\nimport {\n  ChevronDownIcon,\n  ChevronUpIcon,\n  ExternalLinkIcon,\n  SearchIcon,\n} from \"lucide-react\";\nimport { useId, useMemo, useState } from \"react\";\n\nimport { cn } from \"@/registry/default/lib/utils\";\nimport { Checkbox } from \"@/registry/default/ui/checkbox\";\nimport { Input } from \"@/registry/default/ui/input\";\nimport { Label } from \"@/registry/default/ui/label\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/registry/default/ui/select\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/registry/default/ui/table\";\n\ndeclare module \"@tanstack/react-table\" {\n  //allows us to define custom properties for our columns\n  // Type parameters TData and TValue must match TanStack Table's declaration exactly\n  // biome-ignore lint: Type parameters required for module augmentation compatibility\n  interface ColumnMeta<TData extends RowData, TValue> {\n    filterVariant?: \"text\" | \"range\" | \"select\";\n  }\n}\n\ntype Item = {\n  id: string;\n  keyword: string;\n  intents: Array<\n    \"Informational\" | \"Navigational\" | \"Commercial\" | \"Transactional\"\n  >;\n  volume: number;\n  cpc: number;\n  traffic: number;\n  link: string;\n};\n\nconst columns: ColumnDef<Item>[] = [\n  {\n    cell: ({ row }) => (\n      <Checkbox\n        aria-label=\"Select row\"\n        checked={row.getIsSelected()}\n        onCheckedChange={(value) => row.toggleSelected(!!value)}\n      />\n    ),\n    header: ({ table }) => (\n      <Checkbox\n        aria-label=\"Select all\"\n        checked={\n          table.getIsAllPageRowsSelected() ||\n          (table.getIsSomePageRowsSelected() && \"indeterminate\")\n        }\n        onCheckedChange={(value) => table.toggleAllPageRowsSelected(!!value)}\n      />\n    ),\n    id: \"select\",\n  },\n  {\n    accessorKey: \"keyword\",\n    cell: ({ row }) => (\n      <div className=\"font-medium\">{row.getValue(\"keyword\")}</div>\n    ),\n    header: \"Keyword\",\n  },\n  {\n    accessorKey: \"intents\",\n    cell: ({ row }) => {\n      const intents = row.getValue(\"intents\") as string[];\n      return (\n        <div className=\"flex gap-1\">\n          {intents.map((intent) => {\n            const styles = {\n              Commercial: \"bg-amber-400/20 text-amber-500\",\n              Informational: \"bg-indigo-400/20 text-indigo-500\",\n              Navigational: \"bg-emerald-400/20 text-emerald-500\",\n              Transactional: \"bg-rose-400/20 text-rose-500\",\n            }[intent];\n\n            return (\n              <div\n                className={cn(\n                  \"flex size-5 items-center justify-center rounded font-medium text-xs\",\n                  styles,\n                )}\n                key={intent}\n              >\n                {intent.charAt(0)}\n              </div>\n            );\n          })}\n        </div>\n      );\n    },\n    enableSorting: false,\n    filterFn: (row, id, filterValue) => {\n      const rowValue = row.getValue(id);\n      return Array.isArray(rowValue) && rowValue.includes(filterValue);\n    },\n    header: \"Intents\",\n    meta: {\n      filterVariant: \"select\",\n    },\n  },\n  {\n    accessorKey: \"volume\",\n    cell: ({ row }) => {\n      const volume = Number.parseInt(row.getValue(\"volume\"), 10);\n      return new Intl.NumberFormat(\"en-US\", {\n        maximumFractionDigits: 1,\n        notation: \"compact\",\n      }).format(volume);\n    },\n    header: \"Volume\",\n    meta: {\n      filterVariant: \"range\",\n    },\n  },\n  {\n    accessorKey: \"cpc\",\n    cell: ({ row }) => <div>${row.getValue(\"cpc\")}</div>,\n    header: \"CPC\",\n    meta: {\n      filterVariant: \"range\",\n    },\n  },\n  {\n    accessorKey: \"traffic\",\n    cell: ({ row }) => {\n      const traffic = Number.parseInt(row.getValue(\"traffic\"), 10);\n      return new Intl.NumberFormat(\"en-US\", {\n        maximumFractionDigits: 1,\n        notation: \"compact\",\n      }).format(traffic);\n    },\n    header: \"Traffic\",\n    meta: {\n      filterVariant: \"range\",\n    },\n  },\n  {\n    accessorKey: \"link\",\n    cell: ({ row }) => (\n      <a className=\"inline-flex items-center gap-1 hover:underline\" href=\"#\">\n        {row.getValue(\"link\")} <ExternalLinkIcon aria-hidden=\"true\" size={12} />\n      </a>\n    ),\n    enableSorting: false,\n    header: \"Link\",\n  },\n];\n\nconst items: Item[] = [\n  {\n    cpc: 2.5,\n    id: \"1\",\n    intents: [\"Informational\", \"Navigational\"],\n    keyword: \"react components\",\n    link: \"https://coss.com/origin\",\n    traffic: 88,\n    volume: 2507,\n  },\n  {\n    cpc: 4.75,\n    id: \"2\",\n    intents: [\"Commercial\", \"Transactional\"],\n    keyword: \"buy react templates\",\n    link: \"https://coss.com/origin/input\",\n    traffic: 65,\n    volume: 1850,\n  },\n  {\n    cpc: 3.25,\n    id: \"3\",\n    intents: [\"Informational\", \"Commercial\"],\n    keyword: \"react ui library\",\n    link: \"https://coss.com/origin/badge\",\n    traffic: 112,\n    volume: 3200,\n  },\n  {\n    cpc: 1.95,\n    id: \"4\",\n    intents: [\"Transactional\"],\n    keyword: \"tailwind components download\",\n    link: \"https://coss.com/origin/alert\",\n    traffic: 45,\n    volume: 890,\n  },\n  {\n    cpc: 5.5,\n    id: \"5\",\n    intents: [\"Commercial\", \"Transactional\"],\n    keyword: \"react dashboard template free\",\n    link: \"https://coss.com/origin/tabs\",\n    traffic: 156,\n    volume: 4100,\n  },\n  {\n    cpc: 1.25,\n    id: \"6\",\n    intents: [\"Informational\"],\n    keyword: \"how to use react components\",\n    link: \"https://coss.com/origin/table\",\n    traffic: 42,\n    volume: 1200,\n  },\n  {\n    cpc: 6.8,\n    id: \"7\",\n    intents: [\"Commercial\", \"Transactional\"],\n    keyword: \"react ui kit premium\",\n    link: \"https://coss.com/origin/avatar\",\n    traffic: 28,\n    volume: 760,\n  },\n  {\n    cpc: 1.8,\n    id: \"8\",\n    intents: [\"Informational\", \"Navigational\"],\n    keyword: \"react component documentation\",\n    link: \"https://coss.com/origin\",\n    traffic: 35,\n    volume: 950,\n  },\n];\n\nexport default function Component() {\n  const [columnFilters, setColumnFilters] = useState<ColumnFiltersState>([]);\n  const [sorting, setSorting] = useState<SortingState>([\n    {\n      desc: false,\n      id: \"traffic\",\n    },\n  ]);\n\n  const table = useReactTable({\n    columns,\n    data: items,\n    enableSortingRemoval: false,\n    getCoreRowModel: getCoreRowModel(),\n    getFacetedMinMaxValues: getFacetedMinMaxValues(), // generate min/max values for range filter\n    getFacetedRowModel: getFacetedRowModel(), // client-side faceting\n    getFacetedUniqueValues: getFacetedUniqueValues(), // generate unique values for select filter/autocomplete\n    getFilteredRowModel: getFilteredRowModel(), //client-side filtering\n    getSortedRowModel: getSortedRowModel(),\n    onColumnFiltersChange: setColumnFilters,\n    onSortingChange: setSorting,\n    state: {\n      columnFilters,\n      sorting,\n    },\n  });\n\n  const keywordColumn = table.getColumn(\"keyword\");\n  const intentsColumn = table.getColumn(\"intents\");\n  const volumeColumn = table.getColumn(\"volume\");\n  const cpcColumn = table.getColumn(\"cpc\");\n  const trafficColumn = table.getColumn(\"traffic\");\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Filters */}\n      <div className=\"flex flex-wrap gap-3\">\n        {/* Search input */}\n        {keywordColumn && (\n          <div className=\"w-44\">\n            <Filter column={keywordColumn} />\n          </div>\n        )}\n        {/* Intents select */}\n        {intentsColumn && (\n          <div className=\"w-36\">\n            <Filter column={intentsColumn} />\n          </div>\n        )}\n        {/* Volume inputs */}\n        {volumeColumn && (\n          <div className=\"w-36\">\n            <Filter column={volumeColumn} />\n          </div>\n        )}\n        {/* CPC inputs */}\n        {cpcColumn && (\n          <div className=\"w-36\">\n            <Filter column={cpcColumn} />\n          </div>\n        )}\n        {/* Traffic inputs */}\n        {trafficColumn && (\n          <div className=\"w-36\">\n            <Filter column={trafficColumn} />\n          </div>\n        )}\n      </div>\n\n      <Table>\n        <TableHeader>\n          {table.getHeaderGroups().map((headerGroup) => (\n            <TableRow className=\"bg-muted/50\" key={headerGroup.id}>\n              {headerGroup.headers.map((header) => {\n                return (\n                  <TableHead\n                    aria-sort={\n                      header.column.getIsSorted() === \"asc\"\n                        ? \"ascending\"\n                        : header.column.getIsSorted() === \"desc\"\n                          ? \"descending\"\n                          : \"none\"\n                    }\n                    className=\"relative h-10 select-none border-t\"\n                    key={header.id}\n                  >\n                    {header.isPlaceholder ? null : header.column.getCanSort() ? (\n                      <div\n                        className={cn(\n                          header.column.getCanSort() &&\n                            \"flex h-full cursor-pointer select-none items-center justify-between gap-2\",\n                        )}\n                        onClick={header.column.getToggleSortingHandler()}\n                        onKeyDown={(e) => {\n                          // Enhanced keyboard handling for sorting\n                          if (\n                            header.column.getCanSort() &&\n                            (e.key === \"Enter\" || e.key === \" \")\n                          ) {\n                            e.preventDefault();\n                            header.column.getToggleSortingHandler()?.(e);\n                          }\n                        }}\n                        tabIndex={header.column.getCanSort() ? 0 : undefined}\n                      >\n                        {flexRender(\n                          header.column.columnDef.header,\n                          header.getContext(),\n                        )}\n                        {{\n                          asc: (\n                            <ChevronUpIcon\n                              aria-hidden=\"true\"\n                              className=\"shrink-0 opacity-60\"\n                              size={16}\n                            />\n                          ),\n                          desc: (\n                            <ChevronDownIcon\n                              aria-hidden=\"true\"\n                              className=\"shrink-0 opacity-60\"\n                              size={16}\n                            />\n                          ),\n                        }[header.column.getIsSorted() as string] ?? (\n                          <span aria-hidden=\"true\" className=\"size-4\" />\n                        )}\n                      </div>\n                    ) : (\n                      flexRender(\n                        header.column.columnDef.header,\n                        header.getContext(),\n                      )\n                    )}\n                  </TableHead>\n                );\n              })}\n            </TableRow>\n          ))}\n        </TableHeader>\n        <TableBody>\n          {table.getRowModel().rows?.length ? (\n            table.getRowModel().rows.map((row) => (\n              <TableRow\n                data-state={row.getIsSelected() && \"selected\"}\n                key={row.id}\n              >\n                {row.getVisibleCells().map((cell) => (\n                  <TableCell key={cell.id}>\n                    {flexRender(cell.column.columnDef.cell, cell.getContext())}\n                  </TableCell>\n                ))}\n              </TableRow>\n            ))\n          ) : (\n            <TableRow>\n              <TableCell className=\"h-24 text-center\" colSpan={columns.length}>\n                No results.\n              </TableCell>\n            </TableRow>\n          )}\n        </TableBody>\n      </Table>\n      <p className=\"mt-4 text-center text-muted-foreground text-sm\">\n        Data table with filters made with{\" \"}\n        <a\n          className=\"underline hover:text-foreground\"\n          href=\"https://tanstack.com/table\"\n          rel=\"noopener noreferrer\"\n          target=\"_blank\"\n        >\n          TanStack Table\n        </a>\n      </p>\n    </div>\n  );\n}\n\nfunction Filter({ column }: { column: Column<Item, unknown> }) {\n  const id = useId();\n  const columnFilterValue = column.getFilterValue();\n  const { filterVariant } = column.columnDef.meta ?? {};\n  const columnHeader =\n    typeof column.columnDef.header === \"string\" ? column.columnDef.header : \"\";\n  const sortedUniqueValues = useMemo(() => {\n    if (filterVariant === \"range\") return [];\n\n    // Get all unique values from the column\n    const values = Array.from(column.getFacetedUniqueValues().keys());\n\n    // If the values are arrays, flatten them and get unique items\n    const flattenedValues = values.reduce((acc: string[], curr) => {\n      if (Array.isArray(curr)) {\n        acc.push(...curr);\n      } else {\n        acc.push(curr);\n      }\n      return acc;\n    }, []);\n\n    // Get unique values and sort them\n    return Array.from(new Set(flattenedValues)).sort();\n  }, [column, filterVariant]);\n\n  if (filterVariant === \"range\") {\n    return (\n      <div className=\"*:not-first:mt-2\">\n        <Label>{columnHeader}</Label>\n        <div className=\"flex\">\n          <Input\n            aria-label={`${columnHeader} min`}\n            className=\"flex-1 rounded-e-none [-moz-appearance:_textfield] focus:z-10 [&::-webkit-inner-spin-button]:m-0 [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:m-0 [&::-webkit-outer-spin-button]:appearance-none\"\n            id={`${id}-range-1`}\n            onChange={(e) =>\n              column.setFilterValue((old: [number, number]) => [\n                e.target.value ? Number(e.target.value) : undefined,\n                old?.[1],\n              ])\n            }\n            placeholder=\"Min\"\n            type=\"number\"\n            value={(columnFilterValue as [number, number])?.[0] ?? \"\"}\n          />\n          <Input\n            aria-label={`${columnHeader} max`}\n            className=\"-ms-px flex-1 rounded-s-none [-moz-appearance:_textfield] focus:z-10 [&::-webkit-inner-spin-button]:m-0 [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:m-0 [&::-webkit-outer-spin-button]:appearance-none\"\n            id={`${id}-range-2`}\n            onChange={(e) =>\n              column.setFilterValue((old: [number, number]) => [\n                old?.[0],\n                e.target.value ? Number(e.target.value) : undefined,\n              ])\n            }\n            placeholder=\"Max\"\n            type=\"number\"\n            value={(columnFilterValue as [number, number])?.[1] ?? \"\"}\n          />\n        </div>\n      </div>\n    );\n  }\n\n  if (filterVariant === \"select\") {\n    return (\n      <div className=\"*:not-first:mt-2\">\n        <Label htmlFor={`${id}-select`}>{columnHeader}</Label>\n        <Select\n          onValueChange={(value) => {\n            column.setFilterValue(value === \"all\" ? undefined : value);\n          }}\n          value={columnFilterValue?.toString() ?? \"all\"}\n        >\n          <SelectTrigger id={`${id}-select`}>\n            <SelectValue />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"all\">All</SelectItem>\n            {sortedUniqueValues.map((value) => (\n              <SelectItem key={String(value)} value={String(value)}>\n                {String(value)}\n              </SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"*:not-first:mt-2\">\n      <Label htmlFor={`${id}-input`}>{columnHeader}</Label>\n      <div className=\"relative\">\n        <Input\n          className=\"peer ps-9\"\n          id={`${id}-input`}\n          onChange={(e) => column.setFilterValue(e.target.value)}\n          placeholder={`Search ${columnHeader.toLowerCase()}`}\n          type=\"text\"\n          value={(columnFilterValue ?? \"\") as string}\n        />\n        <div className=\"pointer-events-none absolute inset-y-0 start-0 flex items-center justify-center ps-3 text-muted-foreground/80 peer-disabled:opacity-50\">\n          <SearchIcon size={16} />\n        </div>\n      </div>\n    </div>\n  );\n}\n",
      "type": "registry:component"
    }
  ],
  "meta": {
    "colSpan": 3,
    "tags": [
      "table",
      "tanstack",
      "checkbox",
      "search",
      "select",
      "range",
      "input",
      "filter",
      "sort"
    ]
  }
}