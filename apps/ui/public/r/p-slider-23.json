{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "p-slider-23",
  "type": "registry:block",
  "description": "Object position sliders with reset",
  "dependencies": [
    "lucide-react"
  ],
  "registryDependencies": [
    "@coss/button",
    "@coss/input",
    "@coss/label",
    "@coss/slider"
  ],
  "files": [
    {
      "path": "registry/default/particles/p-slider-23.tsx",
      "content": "\"use client\";\n\nimport { RotateCcwIcon } from \"lucide-react\";\nimport type { ChangeEvent } from \"react\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\n\nimport { Button } from \"@/registry/default/ui/button\";\nimport { Input } from \"@/registry/default/ui/input\";\nimport { Label } from \"@/registry/default/ui/label\";\nimport { Slider } from \"@/registry/default/ui/slider\";\n\nfunction useSliderWithInput({\n  minValue,\n  maxValue,\n  initialValue,\n  defaultValue,\n}: {\n  minValue: number;\n  maxValue: number;\n  initialValue: number;\n  defaultValue: number;\n}) {\n  const [sliderValue, setSliderValue] = useState<number | readonly number[]>(\n    initialValue,\n  );\n  const [inputValue, setInputValue] = useState(initialValue.toString());\n\n  const validateAndUpdateValue = useCallback(\n    (rawValue: string) => {\n      if (rawValue === \"\" || rawValue === \"-\") {\n        setInputValue(\"0\");\n        setSliderValue(0);\n        return;\n      }\n\n      const numValue = Number.parseFloat(rawValue);\n\n      if (Number.isNaN(numValue)) {\n        const currentValue = Array.isArray(sliderValue)\n          ? sliderValue[0]\n          : sliderValue;\n        setInputValue(currentValue.toString());\n        return;\n      }\n\n      const clampedValue = Math.min(maxValue, Math.max(minValue, numValue));\n      setSliderValue(clampedValue);\n      setInputValue(clampedValue.toString());\n    },\n    [sliderValue, minValue, maxValue],\n  );\n\n  const handleInputChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    const newValue = e.target.value;\n    if (newValue === \"\" || /^-?\\d*\\.?\\d*$/.test(newValue)) {\n      setInputValue(newValue);\n    }\n  }, []);\n\n  const handleSliderChange = useCallback(\n    (newValue: number | readonly number[]) => {\n      setSliderValue(newValue);\n      const val = Array.isArray(newValue) ? newValue[0] : newValue;\n      setInputValue(val.toString());\n    },\n    [],\n  );\n\n  const resetToDefault = useCallback(() => {\n    setSliderValue(defaultValue);\n    setInputValue(defaultValue.toString());\n  }, [defaultValue]);\n\n  return {\n    handleInputChange,\n    handleSliderChange,\n    inputValue,\n    resetToDefault,\n    sliderValue,\n    validateAndUpdateValue,\n  };\n}\n\nfunction SliderWithInput({\n  minValue,\n  maxValue,\n  initialValue,\n  defaultValue,\n  label,\n  onRegisterReset,\n}: {\n  minValue: number;\n  maxValue: number;\n  initialValue: number;\n  defaultValue: number;\n  label: string;\n  onRegisterReset: (resetFn: () => void) => void;\n}) {\n  const {\n    sliderValue,\n    inputValue,\n    validateAndUpdateValue,\n    handleInputChange,\n    handleSliderChange,\n    resetToDefault,\n  } = useSliderWithInput({ defaultValue, initialValue, maxValue, minValue });\n\n  useEffect(() => {\n    onRegisterReset(resetToDefault);\n  }, [onRegisterReset, resetToDefault]);\n\n  return (\n    <div className=\"flex items-center gap-2\">\n      <Label className=\"text-muted-foreground text-xs\">{label}</Label>\n      <Slider\n        aria-label={label}\n        className=\"grow\"\n        max={maxValue}\n        min={minValue}\n        onValueChange={handleSliderChange}\n        value={sliderValue}\n      />\n      <Input\n        aria-label=\"Enter value\"\n        className=\"h-8 w-12 px-2 py-1\"\n        inputMode=\"decimal\"\n        onBlur={() => validateAndUpdateValue(inputValue)}\n        onChange={handleInputChange}\n        onKeyDown={(e) => {\n          if (e.key === \"Enter\") {\n            validateAndUpdateValue(inputValue);\n          }\n        }}\n        type=\"text\"\n        value={inputValue}\n      />\n    </div>\n  );\n}\n\nexport default function Particle() {\n  const resetFunctionsRef = useRef<(() => void)[]>([]);\n\n  const resetAll = () => {\n    for (const resetFn of resetFunctionsRef.current) {\n      resetFn();\n    }\n  };\n\n  const registerResetFunction = (resetFn: () => void, index: number) => {\n    resetFunctionsRef.current[index] = resetFn;\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <legend className=\"font-medium text-foreground text-sm\">\n        Object position\n      </legend>\n      <div className=\"space-y-2\">\n        <SliderWithInput\n          defaultValue={0}\n          initialValue={-2}\n          label=\"X\"\n          maxValue={10}\n          minValue={-10}\n          onRegisterReset={(resetFn) => registerResetFunction(resetFn, 0)}\n        />\n        <SliderWithInput\n          defaultValue={0}\n          initialValue={4}\n          label=\"Y\"\n          maxValue={10}\n          minValue={-10}\n          onRegisterReset={(resetFn) => registerResetFunction(resetFn, 1)}\n        />\n        <SliderWithInput\n          defaultValue={0}\n          initialValue={2}\n          label=\"Z\"\n          maxValue={10}\n          minValue={-10}\n          onRegisterReset={(resetFn) => registerResetFunction(resetFn, 2)}\n        />\n      </div>\n      <Button className=\"w-full\" onClick={resetAll} variant=\"outline\">\n        <RotateCcwIcon aria-hidden=\"true\" className=\"-ms-1 opacity-60\" />\n        Reset\n      </Button>\n    </div>\n  );\n}\n",
      "type": "registry:block"
    }
  ],
  "meta": {
    "className": "**:data-[slot=preview]:w-full **:data-[slot=preview]:max-w-64"
  },
  "categories": [
    "slider",
    "input",
    "button"
  ]
}