{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "p-slider-18",
  "type": "registry:block",
  "description": "Dual range slider with inputs",
  "registryDependencies": [
    "@coss/input",
    "@coss/slider"
  ],
  "files": [
    {
      "path": "registry/default/particles/p-slider-18.tsx",
      "content": "\"use client\";\n\nimport type { ChangeEvent } from \"react\";\n\nimport { useCallback, useRef, useState } from \"react\";\n\nimport { Input } from \"@/registry/default/ui/input\";\nimport { Slider } from \"@/registry/default/ui/slider\";\n\nconst minValue = 0;\nconst maxValue = 200;\nconst initialValue = [50, 150];\n\nfunction extractValues(value: number | readonly number[]): number[] {\n  return Array.isArray(value) ? [...value] : [value];\n}\n\nexport default function Particle() {\n  const [sliderValue, setSliderValue] = useState<number | readonly number[]>(\n    initialValue,\n  );\n  const [inputValues, setInputValues] = useState(\n    initialValue.map((v) => v.toString()),\n  );\n  const sliderValueRef = useRef(sliderValue);\n  const inputValuesRef = useRef(inputValues);\n\n  sliderValueRef.current = sliderValue;\n  inputValuesRef.current = inputValues;\n\n  const validateAndUpdateValue = useCallback(\n    (rawValue: string, index: number) => {\n      const currentSliderValues = extractValues(sliderValueRef.current);\n\n      if (rawValue === \"\" || rawValue === \"-\") {\n        const newInputValues = [...inputValuesRef.current];\n        newInputValues[index] = \"0\";\n        setInputValues(newInputValues);\n\n        const newSliderValues = [...currentSliderValues];\n        newSliderValues[index] = 0;\n        setSliderValue(newSliderValues);\n        return;\n      }\n\n      const numValue = Number.parseFloat(rawValue);\n\n      if (Number.isNaN(numValue)) {\n        const newInputValues = [...inputValuesRef.current];\n        newInputValues[index] = currentSliderValues[index]?.toString() ?? \"0\";\n        setInputValues(newInputValues);\n        return;\n      }\n\n      let clampedValue = Math.min(maxValue, Math.max(minValue, numValue));\n\n      if (currentSliderValues.length > 1) {\n        if (index === 0) {\n          clampedValue = Math.min(clampedValue, currentSliderValues[1]);\n        } else {\n          clampedValue = Math.max(clampedValue, currentSliderValues[0]);\n        }\n      }\n\n      const newSliderValues = [...currentSliderValues];\n      newSliderValues[index] = clampedValue;\n      setSliderValue(newSliderValues);\n\n      const newInputValues = [...inputValuesRef.current];\n      newInputValues[index] = clampedValue.toString();\n      setInputValues(newInputValues);\n    },\n    [],\n  );\n\n  const handleInputChange = useCallback(\n    (e: ChangeEvent<HTMLInputElement>, index: number) => {\n      const newValue = e.target.value;\n      if (newValue === \"\" || /^-?\\d*\\.?\\d*$/.test(newValue)) {\n        const newInputValues = [...inputValuesRef.current];\n        newInputValues[index] = newValue;\n        setInputValues(newInputValues);\n      }\n    },\n    [],\n  );\n\n  const handleSliderChange = useCallback(\n    (newValue: number | readonly number[]) => {\n      setSliderValue(newValue);\n      const values = extractValues(newValue);\n      setInputValues(values.map((v) => v.toString()));\n    },\n    [],\n  );\n\n  return (\n    <div className=\"flex items-center gap-4\">\n      <Input\n        aria-label=\"Enter minimum value\"\n        className=\"h-8 w-12 px-2 py-1\"\n        inputMode=\"decimal\"\n        onBlur={() => validateAndUpdateValue(inputValues[0] ?? \"0\", 0)}\n        onChange={(e) => handleInputChange(e, 0)}\n        onKeyDown={(e) => {\n          if (e.key === \"Enter\") {\n            validateAndUpdateValue(inputValues[0] ?? \"0\", 0);\n          }\n        }}\n        type=\"text\"\n        value={inputValues[0] ?? \"0\"}\n      />\n      <Slider\n        aria-label=\"Dual range slider with input\"\n        className=\"grow\"\n        max={maxValue}\n        min={minValue}\n        onValueChange={handleSliderChange}\n        value={sliderValue}\n      />\n      <Input\n        aria-label=\"Enter maximum value\"\n        className=\"h-8 w-12 px-2 py-1\"\n        inputMode=\"decimal\"\n        onBlur={() => validateAndUpdateValue(inputValues[1] ?? \"0\", 1)}\n        onChange={(e) => handleInputChange(e, 1)}\n        onKeyDown={(e) => {\n          if (e.key === \"Enter\") {\n            validateAndUpdateValue(inputValues[1] ?? \"0\", 1);\n          }\n        }}\n        type=\"text\"\n        value={inputValues[1] ?? \"0\"}\n      />\n    </div>\n  );\n}\n",
      "type": "registry:block"
    }
  ],
  "meta": {
    "className": "**:data-[slot=preview]:w-full **:data-[slot=preview]:max-w-64"
  },
  "categories": [
    "slider",
    "input"
  ]
}