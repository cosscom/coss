### Adding a new particle component (registry/default/particles)

This guide explains the end‑to‑end steps for adding a new component under `@particles/` and making it available in the app and registry.

—

## 1) Create the component file

- Location: `apps/ui/registry/default/particles/`
- Naming: `p-{component}-{N}.tsx`
  - **component**: The component name (e.g., `button`, `input`, `alert-dialog`, `input-group`)
  - **N**: progressive number within the category (e.g. `1`, `2`, `3`)
- Export as a functional component:

```tsx
export default function Particle() {
  // ...
}
```

**Important notes:**
- Always name the default export function `Particle` (not `ParticleButton8` or similar)
- Use Base UI primitives from `@/registry/default/ui/` (e.g., `input`, `button`, `label`, etc.)
- If a particle uses multiple UI primitives, choose the primary category for the file name
- Keep files minimal and focused
- Component names use hyphens for multi-word components (e.g., `alert-dialog`, `input-group`, `number-field`)

**Examples:**
- `p-button-1.tsx` (first button particle)
- `p-input-2.tsx` (second input particle)
- `p-alert-dialog-1.tsx` (first alert dialog particle)
- `p-input-group-3.tsx` (third input group particle)

## 2) Add a registry item

Edit: `apps/ui/registry/registry-particles.ts`

For each new particle, add an object with the following fields:
- **name**: the particle id (e.g. `p-input-6`).
- **description**: concise, ≤ 15 words, clear to end users.
  - Example: `"Input with helper label"`.
- **type**: `"registry:block"`.
- **registryDependencies**: Array of `@coss/*` package names for the UI primitives used.
  - Example: `["@coss/input", "@coss/label"]`
- **dependencies**: npm package dependencies if needed (often empty for simple particles).
  - Example: `["lucide-react"]`
- **files**: include exactly one file pointing to the particle source:
  - `path`: `"particles/p-input-6.tsx"`
  - `type`: `"registry:block"`
- **categories**: use the `categories()` helper function with category names from `registry-categories.ts`.
  - Example: `categories("input", "label")`
  - **Important:** All valid category names are typed in `registry-categories.ts`. The `categories()` helper function ensures type safety and will show TypeScript errors if you use an invalid category name.
  - Category names use spaces (e.g., `"input group"`, `"alert dialog"`) not hyphens, as defined in `registry-categories.ts`
- **meta** (optional): object with `className` property for wrapper styling:
  ```tsx
  meta: {
    className: "**:data-[slot=preview]:w-full **:data-[slot=preview]:max-w-64",
  }
  ```

Example entry:

```tsx
{
  categories: categories("input", "label"),
  description: "Input with helper label",
  files: [{ path: "particles/p-input-6.tsx", type: "registry:block" }],
  meta: {
    className: "**:data-[slot=preview]:w-full **:data-[slot=preview]:max-w-64",
  },
  name: "p-input-6",
  registryDependencies: ["@coss/input", "@coss/label"],
  type: "registry:block",
}
```

**Important:**
- All valid category names are typed in `registry-categories.ts`
- Category names must match exactly as defined in `registry-categories.ts` (e.g., `"input group"` not `"input-group"`, `"alert dialog"` not `"alert-dialog"`)
- The `categories()` helper function ensures type safety - TypeScript will error if you use an invalid category
- `meta.className` is applied to the preview wrapper via `ComponentPreview`

**meta.className Property:**
The `meta.className` property adds CSS classes to the particle preview wrapper. This is useful for:
- Responsive sizing: `"**:data-[slot=preview]:w-full **:data-[slot=preview]:max-w-64"`
- Full width components: `"**:data-[slot=preview]:w-full"`
- Custom layouts and spacing

## 3) Add to Documentation (Optional)

If you want to showcase the particle in documentation:

1. Find the relevant MDX file in `content/docs/components/`
2. Add your particle with `<ComponentPreview />`:

```mdx
<ComponentPreview name="p-button-8" />
```

You can also pass a `className` prop to override the meta className:

```mdx
<ComponentPreview
  name="p-button-8"
  className="[&_.preview>*]:w-full [&_.preview>*]:max-w-80"
/>
```

## 4) Build the registry

Run from `apps/ui` directory:

```bash
# Format code and sort imports
bun run format:all

# Build registry JSON files
bun run registry:build

## Copy UI components to the packages folder
bun run ui:propagate
```

The `registry:build` command will:
- Generate `registry/__index__.tsx` with all particles
- Generate `registry.json` and `public/r/registry.json`
- Build individual JSON files for each particle in `public/r/`

—

## Approved categories (tags)

All valid category names are typed in `registry-categories.ts`. Use these only for the `categories` field in `registry-particles.ts`. Category names must match exactly as defined in `registry-categories.ts`:

**Component categories:**
accordion, alert, alert dialog, autocomplete, avatar, badge, breadcrumb, button, card, checkbox, checkbox group, collapsible, combobox, dialog, empty state, field, fieldset, form, frame, group, input, input group, kbd, label, menu, meter, number field, pagination, popover, preview card, progress, radio group, scroll area, select, separator, sheet, skeleton, slider, spinner, switch, table, tabs, textarea, toast, toggle, toggle group, toolbar, tooltip

**Tag categories:**
async, copy, disabled, error, file, filter, info, loading, multiselect, password, search, sort, success, tag, tanstack, text editor, time, upload, validation, warning, zod

**Important notes:**
- All category names are typed in `registry-categories.ts` - refer to this file for the complete list
- Category names use spaces (e.g., `"input group"`, `"alert dialog"`, `"empty state"`) not hyphens
- The `categories()` helper function provides type safety - TypeScript will error if you use an invalid category

—

## Guidelines

### Code Style
- Use TypeScript
- Follow existing naming conventions
- Use meaningful, descriptive names
- Keep components focused and single-purpose
- Always export as `export default function Particle()`

### Categories
- All valid category names are typed in `registry-categories.ts`
- Use categories that correspond to actual components
- For composite components, include all relevant categories
- Categories are used for filtering on the particles page
- Category names must match exactly as defined in `registry-categories.ts` (use spaces, not hyphens)
- The `categories()` helper function ensures type safety - TypeScript will error if you use an invalid category

### Descriptions
- Keep descriptions concise but informative (≤ 15 words recommended)
- Focus on what the component does, not how it's implemented
- Descriptions appear on the particles page

### Dependencies
- Be accurate with `dependencies` and `registryDependencies` - these are used for installation
- `registryDependencies` should reference `@coss/*` package names
- `dependencies` should list external npm packages (e.g., `["lucide-react"]`)

### Numbering
- Particles are numbered sequentially within each category
- If you're adding a new particle to a category, check the highest number and increment
- For example, if `p-button-26.tsx` exists, the next button particle should be `p-button-27.tsx`

## Quick checklist

- Create `registry/default/particles/p-{component}-{N}.tsx` with `export default function Particle()`.
- Add an item to `registry/registry-particles.ts` with `name`, `description`, `type`, `registryDependencies`, optional `dependencies`, `files`, `categories` (using `categories()` helper), and optional `meta.className`.
- (Optional) Add to documentation MDX file with `<ComponentPreview name="p-{component}-{N}" />`
- Format code: `bun run format:all`
- Run `bun run registry:build` from `apps/ui`
